<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Java MyBatisPlus | Gridea</title>

<link rel="shortcut icon" href="https://ganhan999.github.io//favicon.ico?v=1615898986121">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://ganhan999.github.io//styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            Gridea
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            é¦–é¡µ
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            å½’æ¡£
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            æ ‡ç­¾
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            å…³äº
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1615898986121" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    Java MyBatisPlus
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2021-01-20 Â·
                    </time>
                    
                        <a href="https://ganhan999.github.io/tag/pVOKe1jE1_/" class="post-tags">
                            # Java
                        </a>
                    
                </div>
                <div class="post-content">
                    <h1 id="mybatisplusbç«™ç‹‚ç¥è¯´">MyBatisPlusBç«™ç‹‚ç¥è¯´</h1>
<p>å­¦ä¹ MyBatis-Plusä¹‹å‰è¦å…ˆå­¦MyBatisâ€“&gt;Springâ€”&gt;SpringMVC</p>
<p>ä¸ºä»€ä¹ˆè¦å­¦å®ƒ?MyBatisPluså¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„æ—¶é—´,æ‰€æœ‰CRUDä»£ç éƒ½å¯ä»¥è‡ªåŠ¨å®Œæˆ</p>
<p>JPA, tk-mapper ,MyBatisPlus</p>
<p>å·æ‡’ç”¨çš„!</p>
<blockquote>
<h2 id="1ç®€ä»‹">1.ç®€ä»‹</h2>
</blockquote>
<p>æ˜¯ä»€ä¹ˆ?</p>
<p>å®˜ç½‘:https://baomidou.com/</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20200930150243845.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20200930150327276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<blockquote>
<h2 id="2ç‰¹æ€§">2.ç‰¹æ€§</h2>
</blockquote>
<ul>
<li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li>
<li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li>
<li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</li>
<li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li>
<li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li>
<li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li>
<li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</li>
<li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li>
<li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li>
<li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º Sql è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li>
<li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li>
</ul>
<h2 id="1å¿«é€Ÿå…¥é—¨">1.å¿«é€Ÿå…¥é—¨</h2>
<p>åœ°å€:https://baomidou.com/guide/quick-start.html#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B</p>
<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶:</p>
<ol>
<li>å¯¼å…¥å¯¹åº”çš„ä¾èµ–</li>
<li>ç ”ç©¶ä¾èµ–å¦‚ä½•é…ç½®</li>
<li>ä»£ç å¦‚ä½•ç¼–å†™</li>
<li>æé«˜æ‰©å±•æŠ€æœ¯èƒ½åŠ›</li>
</ol>
<blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<p>1.åˆ›å»ºæ•°æ®åº“ <code>mybatis_plus</code></p>
<p>2.åˆ›å»ºæ•°æ®åº“</p>
<p>åˆ›å»ºè¡¨</p>
<pre><code class="language-sql">DROP TABLE IF EXISTS user;

CREATE TABLE user
(
	id BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID',
	name VARCHAR(30) NULL DEFAULT NULL COMMENT 'å§“å',
	age INT(11) NULL DEFAULT NULL COMMENT 'å¹´é¾„',
	email VARCHAR(50) NULL DEFAULT NULL COMMENT 'é‚®ç®±',
	PRIMARY KEY (id)
);
--çœŸå®å¼€å‘ç¯å¢ƒä¸­,version(ä¹è§‚é”),deleted(é€»è¾‘åˆ é™¤),gmt_create,gmt_modified
</code></pre>
<p>æ’å…¥æ•°æ®</p>
<pre><code class="language-sql">DELETE FROM user;

INSERT INTO user (id, name, age, email) VALUES
(1, 'Jone', 18, 'test1@baomidou.com'),
(2, 'Jack', 20, 'test2@baomidou.com'),
(3, 'Tom', 28, 'test3@baomidou.com'),
(4, 'Sandy', 21, 'test4@baomidou.com'),
(5, 'Billie', 24, 'test5@baomidou.com');
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20200930150344676.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>3.ç¼–å†™é¡¹ç›®,åˆå§‹åŒ–é¡¹ç›®! ä½¿ç”¨SpringBootåˆå§‹åŒ–!</p>
<p>4.å¯¼å…¥ä¾èµ–</p>
<pre><code class="language-xml">&lt;!--mysql--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!--lombok--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!--mybatis-plus--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.0.5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>è¯´æ˜:æˆ‘ä»¬ä½¿ç”¨mybatis-plus å¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„ä»£ç ,å°½é‡ä¸è¦åŒæ—¶å¯¼å…¥mybatiså’Œmybatis-pluså› ä¸ºç‰ˆæœ¬æœ‰å·®å¼‚!</p>
<p>5.è¿æ¥æ•°æ®åº“!è¿™ä¸€æ­¥å’Œmybatisç›¸åŒ!</p>
<pre><code class="language-properties"># mysql 5 é©±åŠ¨ä¸åŒ  com.mysql.jdbc.Driver

# mysql 8 é©±åŠ¨ä¸åŒ com.mysql.cj.jdbc.Driver . éœ€è¦å¢åŠ æ—¶åŒºçš„é…ç½® serverTimezone=GMT%2B8
spring.datasource.username=codeyuaiiao
spring.datasource.password=3615yuhaijiao
spring.datasource.url=jdbc:mysql://localhost:3306/mybatis_plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
1234567
</code></pre>
<p>6.ä¼ ç»Ÿçš„æ–¹å¼pojo-dao(è¿æ¥mybatis,é…ç½®mapper.xmlæ–‡ä»¶)-service-controller</p>
<p>6.ä½¿ç”¨äº†mybatis-plusä¹‹å</p>
<ul>
<li>
<p>pojo</p>
<pre><code class="language-java">@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
    private Long id;
    private String name;
    private Integer age;
    private String email;
</code></pre>
</li>
<li>
<p>mapperæ¥å£</p>
<pre><code class="language-java">import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.codeyuaiiao.pojo.User;
import org.springframework.stereotype.Repository;

//åœ¨å¯¹åº”çš„mapperä¸Šé¢ç»§æ‰¿åŸºæœ¬çš„ç±» BaseMapper
@Repository//ä»£è¡¨æŒä¹…å±‚
public interface UserMapper extends BaseMapper&lt;User&gt; {
    //æ‰€æœ‰CRUDæ“ä½œéƒ½å·²ç»ç¼–å†™å®Œæˆäº†
    //ä½ ä¸éœ€è¦å‘ä»¥å‰ä¸€æ ·é…ç½®ä¸€å¤§å †æ–‡ä»¶äº†!
}

</code></pre>
<p>æ³¨æ„ç‚¹:éœ€è¦åœ¨ä¸»å¯åŠ¨ç±»<code>MybatisPlusApplication</code>ä¸Šæ‰«ææˆ‘ä»¬MapperåŒ…ä¸‹çš„æ‰€æœ‰æ¥å£</p>
<p><code>@MapperScan(&quot;com.codeyuaiiao.mapper&quot;)</code></p>
</li>
<li>
<p>æµ‹è¯•ç±»ä¸­æµ‹è¯•</p>
<pre><code class="language-java">@SpringBootTest
class MybatisPlusApplicationTests {

    //ç»§æ‰¿äº†BaseMapper, æ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªå·±çˆ¶ç±»
    //æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ‰©å±•æ–¹æ³•
    @Autowired
    private UserMapper userMapper;

    @Test
    void contextLoads() {
        //å‚æ•°æ˜¯ä¸€ä¸ªWrapper , æ¡ä»¶æ„é€ å™¨,è¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ --null
        //æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·
        List&lt;User&gt; users = userMapper.selectList(null);
        users.forEach(System.out::println);
    }
}
</code></pre>
</li>
<li>
<p>æŸ¥è¯¢ç»“æœ:</p>
</li>
</ul>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/20200930150413201.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<blockquote>
<p>æ€è€ƒé—®é¢˜</p>
<ol>
<li>sqlè°å¸®æˆ‘ä»¬å†™çš„?â€”mybatis-plus</li>
<li>æ–¹æ³•è°å¸®æˆ‘ä»¬å†™çš„?â€”mybatis-pluss</li>
</ol>
</blockquote>
<h2 id="2é…ç½®æ—¥å¿—">2.é…ç½®æ—¥å¿—</h2>
<p>æˆ‘ä»¬æ‰€æœ‰çš„sqlæ˜¯ä¸å¯è§çš„,æˆ‘ä»¬å¸Œæœ›çŸ¥é“ä»–æ˜¯æ€ä¹ˆæ‰§è¡Œçš„,æ‰€ä»¥æˆ‘ä»¬å¿…é¡»çœ‹æ—¥å¿—!</p>
<pre><code class="language-properties"># é…ç½®æ—¥å¿—  (é»˜è®¤æ§åˆ¶å°è¾“å‡º)
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20200930150425185.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>é…ç½®å®Œæ—¥å¿—ä¹‹åä½ ä¼šå–œæ¬¢ä¸Šmybatis-plus!</p>
<h2 id="3crudæ‰©å±•">3.CRUDæ‰©å±•</h2>
<h3 id="1æ’å…¥æ•°æ®">1.æ’å…¥æ•°æ®</h3>
<pre><code class="language-java">@Test
public void testInsert(){
    User user = new User();
    user.setName(&quot;codeyuaiiao&quot;);
    user.setAge(3);
    user.setEmail(&quot;747557612@qq.com&quot;);
    int result = userMapper.insert(user);
    System.out.println(result);
    System.out.println(user);

}
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/20200930150437175.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<blockquote>
<p>æ³¨æ„ç‚¹:æ•°æ®åº“æ’å…¥çš„idé»˜è®¤å€¼ä¸º:å…¨å±€çš„å”¯ä¸€id</p>
</blockquote>
<h3 id="2ä¸»é”®ç”Ÿæˆç­–ç•¥">2.ä¸»é”®ç”Ÿæˆç­–ç•¥</h3>
<blockquote>
<p>é»˜è®¤ ID_WORKER å…¨å±€å”¯ä¸€id</p>
<p>å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸»é”®(uuid.è‡ªå¢id.é›ªèŠ±ç®—æ³•.redis.zookeeper)</p>
</blockquote>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€idç”Ÿæˆ:https://www.cnblogs.com/haoxinyue/p/5208136.html</p>
<p><strong>é›ªèŠ±ç®—æ³•</strong>ğŸ˜¦<strong>Twitterçš„snowflakeç®—æ³•</strong>)</p>
<p>snowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„IDã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä½¿ç”¨41bitä½œä¸ºæ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼‰ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0.å¯ä»¥ä¿è¯å‡ ä¹å…¨çƒå”¯ä¸€</p>
<blockquote>
<p>ä¸»é”®è‡ªå¢</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦é…ç½®ä¸»é”®è‡ªå¢:</p>
<ol>
<li>
<p>å®ä½“ç±»å­—æ®µä¸Š<code>@TableId(type = IdType.AUTO)</code></p>
</li>
<li>
<p>æ•°æ®åº“å­—æ®µä¸€å®šè¦æ˜¯<strong>è‡ªå¢</strong>!</p>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/20200930150449191.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/20200930150459128.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
</li>
</ol>
<figure data-type="image" tabindex="9"><img src="https://img-blog.csdnimg.cn/20200930150508407.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<blockquote>
<p>å…¶ä½™æºç è§£é‡Š</p>
</blockquote>
<pre><code class="language-java">public enum IdType {
     
    AUTO(0),//æ•°æ®åº“IDè‡ªå¢  
    NONE(1),//è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹      
    INPUT(2),//ç”¨æˆ·è¾“å…¥ID
      		 //è¯¥ç±»å‹å¯ä»¥é€šè¿‡è‡ªå·±æ³¨å†Œè‡ªåŠ¨å¡«å……æ’ä»¶è¿›è¡Œå¡«å……  
    
//ä»¥ä¸‹3ç§ç±»å‹ã€åªæœ‰å½“æ’å…¥å¯¹è±¡ID ä¸ºç©ºï¼Œæ‰è‡ªåŠ¨å¡«å……ã€‚     
    ID_WORKER(3),//å…¨å±€å”¯ä¸€ID (idWorker)      
    UUID(4),//å…¨å±€å”¯ä¸€ID (UUID)          
    ID_WORKER_STR(5);//å­—ç¬¦ä¸²å…¨å±€å”¯ä¸€ID (idWorker çš„å­—ç¬¦ä¸²è¡¨ç¤º)    
</code></pre>
<h3 id="3æ›´æ–°æ•°æ®">3.æ›´æ–°æ•°æ®</h3>
<blockquote>
<p>åŠ¨æ€sql</p>
</blockquote>
<p>æ³¨æ„:updateById()å‚æ•°æ˜¯ ä¸€ä¸ªå¯¹è±¡!</p>
<pre><code class="language-java">//æµ‹è¯•æ›´æ–°
@Test
public void testUpdate(){
    User user = new User();
    user.setId(2L);
    user.setName(&quot;é˜¿å³§ä¸æ˜¯å±±äº¤&quot;);
    //        æ³¨æ„:updateById()å‚æ•°æ˜¯ ä¸€ä¸ªå¯¹è±¡!
    int i = userMapper.updateById(user);
    System.out.println(i);

}
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://img-blog.csdnimg.cn/20200930150523190.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<figure data-type="image" tabindex="11"><img src="https://img-blog.csdnimg.cn/20200930150543666.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>æ‰€æœ‰çš„sqléƒ½æ˜¯åŠ¨æ€å¸®ä½ é…ç½®çš„</p>
<h3 id="4è‡ªåŠ¨å¡«å……">4.è‡ªåŠ¨å¡«å……</h3>
<p>åˆ›å»ºæ—¶é—´ . ä¿®æ”¹æ—¶é—´! è¿™äº›ä¸ªæ“ä½œéƒ½æ˜¯è‡ªåŠ¨åŒ–å®Œæˆçš„,æˆ‘ä»¬ä¸å¸Œæœ›æ‰‹åŠ¨æ›´æ–°!</p>
<p>é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ:æ‰€æœ‰çš„æ•°æ®åº“è¡¨:gmt_create .gmt_modifiedå‡ ä¹æ‰€æœ‰çš„è¡¨éƒ½è¦é…ç½®ä¸Š!è€Œä¸”éœ€è¦è‡ªåŠ¨åŒ–!</p>
<blockquote>
<p>æ–¹å¼ä¸€:æ•°æ®åº“çº§åˆ«</p>
</blockquote>
<p>1.åœ¨è¡¨ä¸­æ–°å¢å­—æ®µ create_time , update_time</p>
<figure data-type="image" tabindex="12"><img src="https://img-blog.csdnimg.cn/20200930150615744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>2.å†æ¬¡æµ‹è¯•æ’å…¥æ–¹æ³•,æˆ‘ä»¬éœ€è¦å…ˆæŠŠå®ä½“ç±»åŒæ­¥</p>
<pre><code class="language-java">private Data creatTime;
private Data updateTime;
</code></pre>
<p>å†æ¬¡æ›´æ–°æŸ¥çœ‹ç»“æœå³å¯</p>
<figure data-type="image" tabindex="13"><img src="https://img-blog.csdnimg.cn/20200930150634402.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<blockquote>
<p>æ–¹å¼äºŒ:ä»£ç çº§åˆ«</p>
</blockquote>
<p>1.åˆ é™¤æ•°æ®åº“é»˜è®¤å€¼</p>
<figure data-type="image" tabindex="14"><img src="https://img-blog.csdnimg.cn/20200930150644351.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>2.å®ä½“ç±»å­—æ®µå±æ€§ä¸Šæ·»åŠ æ³¨è§£</p>
<pre><code class="language-java">//è®°ä½ç”¨utilåŒ…ä¸‹çš„Date!!
//å­—æ®µæ·»åŠ å¡«å……å†…å®¹
@TableField(fill = FieldFill.INSERT)
private Data creatTime;

@TableField(fill = FieldFill.INSERT_UPDATE)
private Data updateTime;
</code></pre>
<p>3.ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨è§£</p>
<pre><code class="language-java">package com.codeyuaiiao.handler;

import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
import lombok.extern.slf4j.Slf4j;
import org.apache.ibatis.reflection.MetaObject;
import org.springframework.stereotype.Component;

import java.util.Date;

@Slf4j
@Component //æŠŠå¤„ç†å™¨åŠ åˆ°IOCå®¹å™¨ä¸­
public class MyMetaObjectHandler implements MetaObjectHandler {

    //æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥
    @Override
    public void insertFill(MetaObject metaObject) {
        log.info(&quot;Start insert fill.... &quot;);
        this.setFieldValByName(&quot;createTime&quot;,new Date(),metaObject);
        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
    }

    //æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥
    @Override
    public void updateFill(MetaObject metaObject) {
        log.info(&quot;Start update fill.... &quot;);
        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
    }
}
</code></pre>
<p>3.ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨è§£å³å¯!</p>
<pre><code class="language-java">package com.codeyuaiiao.handler;

import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
import lombok.extern.slf4j.Slf4j;
import org.apache.ibatis.reflection.MetaObject;
import org.springframework.stereotype.Component;

import java.util.Date;

@Slf4j
@Component //æŠŠå¤„ç†å™¨åŠ åˆ°IOCå®¹å™¨ä¸­
public class MyMetaObjectHandler implements MetaObjectHandler {

    //æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥
    @Override
    public void insertFill(MetaObject metaObject) {
        log.info(&quot;Start insert fill.... &quot;);
        this.setFieldValByName(&quot;createTime&quot;,new Date(),metaObject);
        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
    }

    //æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥
    @Override
    public void updateFill(MetaObject metaObject) {
        log.info(&quot;Start update fill.... &quot;);
        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
    }
}
</code></pre>
<p>4.æµ‹è¯•æ’å…¥</p>
<p>5æµ‹è¯•æ›´æ–°,è§‚å¯Ÿæ—¶é—´å³å¯!</p>
<h3 id="5ä¹è§‚é”æ‚²è§‚é”">5.ä¹è§‚é”&amp;æ‚²è§‚é”</h3>
<blockquote>
<p>ä¹è§‚é”: é¡¾åæ€ä¹‰ååˆ†ä¹è§‚,ä»–æ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºç°é—®é¢˜,æ— è®ºå¹²ä»€ä¹ˆéƒ½ä¸å»ä¸Šé”!å¦‚æœå‡ºç°äº†é—®é¢˜,å†æ¬¡æ›´æ–°å€¼æµ‹è¯•</p>
<p>æ‚²è§‚é”;é¡¾åæ€ä¹‰ååˆ†æ‚²è§‚,ä»–æ€»æ˜¯è®¤ä¸ºå‡ºç°é—®é¢˜,æ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”!å†å»æ“ä½œ!</p>
</blockquote>
<p>æˆ‘ä»¬è¿™é‡Œä¸»è¦è®²è§£ ä¹è§‚é”æœºåˆ¶!</p>
<p>ä¹è§‚é”å®ç°æ–¹å¼:</p>
<ul>
<li>å–å‡ºè®°å½•æ—¶,è·å–å½“å‰version</li>
<li>æ›´æ–°æ—¶,å¸¦ä¸Šè¿™ä¸ªversion</li>
<li>æ‰§è¡Œæ›´æ–°æ—¶,set version = newVersion where version = oldVersion</li>
<li>å¦‚æœversionä¸å¯¹,å°±æ›´æ–°å¤±è´¥</li>
</ul>
<h3 id="6æŸ¥è¯¢æ“ä½œ">6.æŸ¥è¯¢æ“ä½œ</h3>
<pre><code class="language-java">//æµ‹è¯•æŸ¥è¯¢
@Test
public void testSelectById(){
    User user = userMapper.selectById(1L);
    System.out.println(user);
}

//æµ‹è¯•æ‰¹é‡æŸ¥è¯¢
public void testSelectBatchId(){
    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(1, 2, 3));
    users.forEach(System.out::println);
}

//æŒ‰æ¡ä»¶æŸ¥è¯¢ä¹‹--ä½¿ç”¨Mapæ“ä½œ
@Test
public void testSelectBatchIds(){
    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;name&quot;,&quot;é˜¿å³§è¯´java&quot;);
    map.put(&quot;age&quot;,&quot;18&quot;);

    List&lt;User&gt; users = userMapper.selectByMap(map);
    users.forEach(System.out::println);
}
</code></pre>
<p>æˆ‘ä»¬åœ¨å·¥ä½œä¸­ä¼šé‡è§é€»è¾‘åˆ é™¤</p>
<h3 id="7é€»è¾‘åˆ é™¤">7.é€»è¾‘åˆ é™¤</h3>
<blockquote>
<p>ç‰©ç†åˆ é™¤:ä»æ•°æ®åº“ä¸­ç›´æ¥ç§»é™¤</p>
<p>é€»è¾‘åˆ é™¤: åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰è¢«ç§»é™¤,è€Œæ˜¯é€šè¿‡ä¸€ä¸ªå˜é‡æ¥è®©ä»–å¤±æ•ˆ! deleted=0=&gt;deleted=1</p>
</blockquote>
<p>ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹è¢«åˆ é™¤çš„è®°å½•!é˜²æ­¢æ•°æ®çš„ä¸¢å¤±,ç±»ä¼¼äºå›æ”¶ç«™!</p>
<p>æµ‹è¯•:</p>
<p>1.åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ªdeletedå­—æ®µ</p>
<figure data-type="image" tabindex="15"><img src="https://img-blog.csdnimg.cn/20200930150703144.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<p>2.å®ä½“ç±»ä¸­å¢åŠ å±æ€§</p>
<pre><code class="language-java">//é€»è¾‘åˆ é™¤
@TableLogic
private Integer deleted;
</code></pre>
<p>3.é…ç½®</p>
<pre><code class="language-java">//æ³¨å†Œé€»è¾‘åˆ é™¤
@Bean
public ISqlInjector sqlInjector(){
    return new LogicSqlInjector();
}
</code></pre>
<p>é…ç½®</p>
<pre><code class="language-properties"># é…ç½®é€»è¾‘åˆ é™¤
mybatis-plus.global-config.db-config.logic-delete-value=1
mybatis-plus.global-config.db-config.logic-not-delete-value=0
</code></pre>
<blockquote>
<p>èµ°çš„æ˜¯æ›´æ–°æ“ä½œ,ä¸æ˜¯åˆ é™¤æ“ä½œ</p>
<figure data-type="image" tabindex="16"><img src="https://img-blog.csdnimg.cn/2020093015071649.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
</blockquote>
<blockquote>
<p>æŸ¥è¯¢çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿‡æ»¤åˆ é™¤çš„æ•°æ®</p>
<figure data-type="image" tabindex="17"><img src="https://img-blog.csdnimg.cn/20200930150728942.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
</blockquote>
<p>ä»¥ä¸Šçš„æ‰€æœ‰CRUDæ“ä½œåŠå…¶æ‰©å±•,æˆ‘ä»¬éƒ½å¿…é¡»ç²¾é€šæŒæ¡!ä¼šå¤§å¤§æå¥½ä½ çš„å·¥ä½œå’Œå†™é¡¹ç›®çš„æ•ˆç‡</p>
<h2 id="4æ€§èƒ½åˆ†ææ’ä»¶">4.æ€§èƒ½åˆ†ææ’ä»¶</h2>
<p>æˆ‘ä»¬åœ¨å¹³æ—¶çš„å¼€å‘ä¸­,ä¼šé‡åˆ°ä¸€äº›æ…¢sql.</p>
<p>MPä¹Ÿæä¾›äº†æ€§èƒ½åˆ†ææ’ä»¶,å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±åœæ­¢è¿è¡Œ!</p>
<p>1.å¯¼å…¥æ’ä»¶</p>
<pre><code class="language-java">@Bean
    @Profile({&quot;dev&quot;,&quot;test&quot;}) //è®¾ç½®dev å’Œ testç¯å¢ƒå¼€å¯
    public PerformanceInterceptor performanceInterceptor(){
        PerformanceInterceptor performanceInterceptor = new PerformanceInterceptor();
        performanceInterceptor.setMaxTime(1);
        performanceInterceptor.setFormat(true);
        return performanceInterceptor;
    }
</code></pre>
<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-7kbdevy0-1601449207282)(MyBatisPlusBç«™ç‹‚ç¥è¯´.assets/image-20200930133715010.png)]</p>
<p>è®°ä½åœ¨SpringBootä¸­é…ç½®ç¯å¢ƒä¸º devæˆ–è€…testç¯å¢ƒ</p>
<p>application.propertiesä¸­æ·»åŠ è®¾ç½®å¼€å‘ç¯å¢ƒ</p>
<pre><code class="language-properties">#è®¾ç½®å¼€å‘ç¯å¢ƒ
spring.profiles.active=dev
</code></pre>
<p>2.æµ‹è¯•æŸ¥è¯¢</p>
<pre><code class="language-java">@Test
    public void testSelectBatchId(){
        List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(1, 2, 3));
        users.forEach(System.out::println);
    }
</code></pre>
<figure data-type="image" tabindex="18"><img src="https://img-blog.csdnimg.cn/20200930150745143.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjQ5MjIz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></figure>
<h2 id="5æ¡ä»¶æ„é€ å™¨">5.æ¡ä»¶æ„é€ å™¨</h2>
<pre><code class="language-java">package com.kuang;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.kuang.mapper.UserMapper;
import com.kuang.pojo.User;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import java.util.List;
import java.util.Map;

@SpringBootTest
public class WrapperTest {

    @Autowired
    private UserMapper userMapper;

    @Test
    void contextLoads() {
        // æŸ¥è¯¢nameä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹´é¾„å¤§äºç­‰äº12
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        wrapper
                .isNotNull(&quot;name&quot;)
                .isNotNull(&quot;email&quot;)
                .ge(&quot;age&quot;,12);
        userMapper.selectList(wrapper).forEach(System.out::println); // å’Œæˆ‘ä»¬åˆšæ‰å­¦ä¹ çš„mapå¯¹æ¯”ä¸€ä¸‹
    }

    @Test
    void test2(){
        // æŸ¥è¯¢åå­—ç‹‚ç¥è¯´
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        wrapper.eq(&quot;name&quot;,&quot;ç‹‚ç¥è¯´&quot;);
        User user = userMapper.selectOne(wrapper); // æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‡ºç°å¤šä¸ªç»“æœä½¿ç”¨List æˆ–è€… Map
        System.out.println(user);
    }

    @Test
    void test3(){
        // æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        wrapper.between(&quot;age&quot;,20,30); // åŒºé—´
        Integer count = userMapper.selectCount(wrapper);// æŸ¥è¯¢ç»“æœæ•°
        System.out.println(count);
    }

    // æ¨¡ç³ŠæŸ¥è¯¢
    @Test
    void test4(){
        // æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        // å·¦å’Œå³  t%
        wrapper
                .notLike(&quot;name&quot;,&quot;e&quot;)
                .likeRight(&quot;email&quot;,&quot;t&quot;);

        List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(wrapper);
        maps.forEach(System.out::println);
    }

    // æ¨¡ç³ŠæŸ¥è¯¢
    @Test
    void test5(){

        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        // id åœ¨å­æŸ¥è¯¢ä¸­æŸ¥å‡ºæ¥
        wrapper.inSql(&quot;id&quot;,&quot;select id from user where id&lt;3&quot;);

        List&lt;Object&gt; objects = userMapper.selectObjs(wrapper);
        objects.forEach(System.out::println);
    }

    //æµ‹è¯•å…­
    @Test
    void test6(){
        QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();
        // é€šè¿‡idè¿›è¡Œæ’åº
        wrapper.orderByAsc(&quot;id&quot;);

        List&lt;User&gt; users = userMapper.selectList(wrapper);
        users.forEach(System.out::println);
    }

}
</code></pre>
<h2 id="6ä»£ç è‡ªåŠ¨ç”Ÿæˆéå¸¸nb">6.ä»£ç è‡ªåŠ¨ç”Ÿæˆ**éå¸¸NB</h2>
<p>daoã€pojoã€serviceã€controlleréƒ½ç»™æˆ‘è‡ªå·±å»ç¼–å†™å®Œæˆï¼</p>
<p>AutoGenerator æ˜¯ MyBatis-Plus çš„ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ AutoGenerator å¯ä»¥å¿«é€Ÿç”Ÿæˆ Entityã€</p>
<p>Mapperã€Mapper XMLã€Serviceã€Controller ç­‰å„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>åªéœ€è¦æ”¹å®ä½“ç±»åå­— å’ŒåŒ…å è¿˜æœ‰ æ•°æ®åº“é…ç½®å³å¯</p>
<p>æµ‹è¯•:</p>
<pre><code class="language-java">import com.baomidou.mybatisplus.annotation.DbType; import com.baomidou.mybatisplus.annotation.FieldFill; import com.baomidou.mybatisplus.annotation.IdType; import com.baomidou.mybatisplus.annotation.TableField; import com.baomidou.mybatisplus.generator.AutoGenerator; import com.baomidou.mybatisplus.generator.config.DataSourceConfig; import com.baomidou.mybatisplus.generator.config.GlobalConfig; import com.baomidou.mybatisplus.generator.config.PackageConfig; import com.baomidou.mybatisplus.generator.config.StrategyConfig; import com.baomidou.mybatisplus.generator.config.po.TableFill; import com.baomidou.mybatisplus.generator.config.rules.DateType; import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy; import java.util.ArrayList; 

// ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨ 
public class KuangCode {
public static void main(String[] args) {
    // éœ€è¦æ„å»ºä¸€ä¸ª ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨ å¯¹è±¡ 
    AutoGenerator mpg = new AutoGenerator(); 
    
    // é…ç½®ç­–ç•¥ 
    // 1ã€å…¨å±€é…ç½® 
    GlobalConfig gc = new GlobalConfig();
    String projectPath = System.getProperty(&quot;user.dir&quot;); 
    gc.setOutputDir(projectPath+&quot;/src/main/java&quot;);
    gc.setAuthor(&quot;ç‹‚ç¥è¯´&quot;); gc.setOpen(false);
    gc.setFileOverride(false);
    
    // æ˜¯å¦è¦†ç›–
    gc.setServiceName(&quot;%sService&quot;);
    
    // å»Serviceçš„Iå‰ç¼€
    gc.setIdType(IdType.ID_WORKER);
    gc.setDateType(DateType.ONLY_DATE);
    gc.setSwagger2(true);
    mpg.setGlobalConfig(gc);
    
    //2ã€è®¾ç½®æ•°æ®æº
    DataSourceConfig dsc = new DataSourceConfig();
    dsc.setUrl(&quot;jdbc:mysql://localhost:3306/kuang_community? useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&quot;);
    dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);
    dsc.setUsername(&quot;root&quot;);
    dsc.setPassword(&quot;123456&quot;);
    dsc.setDbType(DbType.MYSQL); mpg.setDataSource(dsc);
    
    //3ã€åŒ…çš„é…ç½®
    PackageConfig pc = new PackageConfig();
    //åªéœ€è¦æ”¹å®ä½“ç±»åå­— å’ŒåŒ…å è¿˜æœ‰ æ•°æ®åº“é…ç½®å³å¯
    pc.setModuleName(&quot;blog&quot;); pc.setParent(&quot;com.kuang&quot;);
    pc.setEntity(&quot;entity&quot;); pc.setMapper(&quot;mapper&quot;);
    pc.setService(&quot;service&quot;); pc.setController(&quot;controller&quot;);
    mpg.setPackageInfo(pc);
    
    //4ã€ç­–ç•¥é…ç½®
    StrategyConfig strategy = new StrategyConfig();
  strategy.setInclude(&quot;blog_tags&quot;,&quot;course&quot;,&quot;links&quot;,&quot;sys_settings&quot;,&quot;user_record&quot;,&quot; user_say&quot;);
    
    // è®¾ç½®è¦æ˜ å°„çš„è¡¨å
    strategy.setNaming(NamingStrategy.underline_to_camel);
    strategy.setColumnNaming(NamingStrategy.underline_to_camel);
    strategy.setEntityLombokModel(true);
    
    // è‡ªåŠ¨lombokï¼›
    strategy.setLogicDeleteFieldName(&quot;deleted&quot;); 
    
    // è‡ªåŠ¨å¡«å……é…ç½®
    TableFill gmtCreate = new TableFill(&quot;gmt_create&quot;, FieldFill.INSERT);
    TableFill gmtModified = new TableFill(&quot;gmt_modified&quot;, FieldFill.INSERT_UPDATE);
    ArrayList&lt;TableFill&gt; tableFills = new ArrayList&lt;&gt;();
    tableFills.add(gmtCreate); tableFills.add(gmtModified);
    strategy.setTableFillList(tableFills);
    
    // ä¹è§‚é”
    strategy.setVersionFieldName(&quot;version&quot;);
    strategy.setRestControllerStyle(true);
    strategy.setControllerMappingHyphenStyle(true);
    
    // localhost:8080/hello_id_2 
    mpg.setStrategy(strategy);
    mpg.execute(); //æ‰§è¡Œ 
	}
}
</code></pre>
<p>å¤§å®¶å¯ä»¥ç»™Bç«™ç‹‚ç¥è¯´ç‚¹ä¸€æ³¢å…³æ³¨!</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://ganhan999.github.io/post/57ã€æ’å…¥åŒºé—´/" class="post-title gt-a-link">
                    ä¸­ç­‰56. åˆå¹¶åŒºé—´
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">æ¸©æ•…è€ŒçŸ¥æ–°</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
                <a href="https://www.zhihu.com/hot" target="_blank">
                    <i class="fab fa-zhihu gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://ganhan999.github.io//atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
